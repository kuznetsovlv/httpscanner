<!DOCTYPE html>
<html>
<head>
	<title>Scanner</title>
	<style type="text/css">

		.hidden {
			display: none;
		}

		body {
			position: absolute;
			width: 100%;
			height: 100%;
			min-height: 100%;
			max-height: 100%;
			padding: 0px;
			margin: 0px;
		}

		#page {
			width: 1000px;
			height: 100%;
			min-height: 300px;
			margin-left: auto;
			margin-right: auto;
			padding: 0px;
			background-color: gray;
			box-sizing: border-box;
		}

		#right, #left {
			display: inline-block;
			width: 50%;
			height: 100%;
			margin: 0px;
			padding: 0px;
			border: 2px solid black;
			box-sizing: border-box;
		}

		#right {float: right;}
		#left {float: left;}

		form fieldset {
			margin-top: 10px;
		}

		form fieldset p {
			padding-left: 10px;
		}

		span+span {
			margin: 5px;
		}

		#submit_button {
			border: none;
			/*text-align: center;*/
		}

	</style>
	<script src='js/scanner.js'></script>
	<script type="text/javascript">
		(function () {
			"use strict";

			window.onload = function () {
				var scanner = new Scanner('scanner');
				scanner.ask('list', function (list) {
					if (!list.length) {
						alert("No scanners found.");
					} else {
						var opts = {'': '--Select device--'};
						for (var i = 0, l = list.length; i < l; ++i) {
							var obj = list[i],
							    name = obj.name;
							opts[name] = [obj.description, ['(', name, ')'].join('')].join(' ');
						}
						this.device_name.setOptions(opts);
						this.device_name.enabled = true;

						/*this.on('change', function (name, values, value) {
							console.log(arguments);
						});*/
					}
				});

				scanner.on('change', function (name, values, value) {
					console.log(arguments);
				});

			};
		})()
	</script>
</head>
<body>
<div id="page">
	<div id="left"></div>
	<div id="right">
		<form id="scanner" oninput="qval.value=parseInt(quality.value)">
			<fieldset id="device_name">
				<legend>Device:</legend>
				<p><span>Get scan from device:</span><span><select name="device_name" disabled><option value="">--Select device--</option></select></span></p>
			</fieldset>

			<fieldset id="image_property">
				<legend>Image property:</legend>
				<p><span>Image format:</span><span><select name="format" disabled><option value="">--Select format--</option></select></span></p>
				<p class="jpeg hidden">
					<span>Quality value:</span>
					<span>0<input name="quality" type="range" value="50" disabled>100 <output name="qval" for="quality"/></span>
				</p>
			</fieldset>

			<fieldset id="submit_button">
				<input type="submit" value="Scan" name="scan" disabled> <input type="button" value="Prescan" name="prescan" disabled>
			</fieldset>
		</form>
	</div>
</div>

</body>
</html>